<%=
  render partial: "partials/page_title",
         locals: {
             model_object: @organisation,
             page_title: t('organisation.check_your_answers.page_title')
         }
%>

<h1 class="govuk-heading-xl">
  <%= t('organisation.check_your_answers.page_heading') %>
</h1>

<dl class="govuk-summary-list">


<div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.name') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.name.present? ? @organisation.name : t('generic.not_answered') %>
    </dd>

    <dd class="govuk-summary-list__actions">
      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.name')}</span>".html_safe,
                :organisation_organisation_name,
                organisation_id: @organisation.id,
        class: "govuk-link govuk-link--no-visited-state"
      %>
    </dd>

  </div>


 <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.location') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <% unless @organisation.line1.present? %>
        <%= t('generic.not_answered') %>
      <% else %>
        <% if @organisation.line1.present? %>
          <p class="govuk-body">
            <%= @organisation.line1 %>
          </p>
        <% end %>

        <% if @organisation.line2.present? %>
          <p class="govuk-body">
            <%= @organisation.line2 %>
          </p>
        <% end %>

        <% if @organisation.line3.present? %>
          <p class="govuk-body">
            <%= @organisation.line3 %>
          </p>
        <% end %>

        <% if @organisation.townCity.present? %>
          <p class="govuk-body">
            <%= @organisation.townCity %>
          </p>
        <% end %>

        <% if @organisation.county.present? %>
          <p class="govuk-body">
            <%= @organisation.county %>
          </p>
        <% end %>

        <% if @organisation.postcode.present? %>
          <p class="govuk-body">
            <%= @organisation.postcode %>
          </p>
        <% end %>
      <% end %>
    </dd>

    <dd class="govuk-summary-list__actions">
      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.location')}</span>".html_safe,
        postcode_path('organisation', @organisation.id),
        class: "govuk-link govuk-link--no-visited-state"
      %>
    </dd>

  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">

      <%= t('organisation.check_your_answers.list_keys.type') %>

    </dt>

    <dd class="govuk-summary-list__value">

      <% if @organisation.org_type.present? %>

        <%= t("organisation.type.labels.#{@organisation.org_type}") %>

        <% if @organisation.org_type == 'other' && @organisation.custom_org_type.present? %>

          <%= @organisation.custom_org_type %>

        <% end %>

      <% else %>

        <%= t('generic.not_answered') %>

      <% end %>

    </dd>

    <dd class="govuk-summary-list__actions">

      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.type')}</span>".html_safe,
                :organisation_type,
                organisation_id: @organisation.id,
                class: "govuk-link govuk-link--no-visited-state"
      %>

    </dd>

  </div>
  
  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.main_purpose_and_activities') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.main_purpose_and_activities.present? ? @organisation.main_purpose_and_activities : t('generic.not_answered') %>
    </dd>

    <dd class="govuk-summary-list__actions">
      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.main_purpose_and_activities')}</span>".html_safe,
         organisation_organisation_description_path(organisation_id: @organisation.id),
        class: "govuk-link govuk-link--no-visited-state"
      %>
    </dd>
  

  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.communities_org_serve') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.communities_that_org_serve.present? ? @organisation.communities_that_org_serve.map { |str| str.gsub('_', ' ') }.join(', ') : t('generic.none') %>
    </dd>

    <dd class="govuk-summary-list__actions">
     <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.communities_org_serve')}</span>".html_safe,
              :organisation_communities_that_org_serve,
              organisation_id: @organisation.id,
        class: "govuk-link govuk-link--no-visited-state"
      %> 
    </dd>
  
  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.leadership_self_identify') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.leadership_self_identify.present? ? @organisation.leadership_self_identify.map { |str| str.gsub('_', ' ') }.join(', ') : t('generic.none') %>
    </dd>

    <dd class="govuk-summary-list__actions">
     <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.leadership_self_identify')}</span>".html_safe,
          :organisation_leadership_self_identify,
          organisation_id: @organisation.id,
        class: "govuk-link govuk-link--no-visited-state"
      %> 
    </dd>
  
  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.charity_number') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.charity_number.present? ?
              @organisation.charity_number : t('organisation.check_your_answers.list_keys.no_charity_number') %>
    </dd>

    <dd class="govuk-summary-list__actions">
      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.charity_number')}</span>".html_safe,
                :organisation_charity_number,
                organisation_id: @organisation.id,
                class: "govuk-link govuk-link--no-visited-state"
      %>
    </dd>

  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.company_number') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.company_number.present? ?
              @organisation.company_number : t('organisation.check_your_answers.list_keys.no_company_number') %>
    </dd>

    <dd class="govuk-summary-list__actions">
       <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.company_number')}</span>".html_safe,
                :organisation_company_number,
                organisation_id: @organisation.id,
                class: "govuk-link govuk-link--no-visited-state"
      %> 
    </dd>

  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.vat_number') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.vat_number.present? ?
              @organisation.vat_number : t('organisation.check_your_answers.list_keys.no_vat_number') %>
    </dd>

    <dd class="govuk-summary-list__actions">
      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.vat_number')}</span>".html_safe,
                :organisation_vat_registered,
                organisation_id: @organisation.id,
                class: "govuk-link govuk-link--no-visited-state"
      %>
    </dd>

  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.board_members_or_trustees') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.board_members_or_trustees.present? ?
              @organisation.board_members_or_trustees : t('organisation.check_your_answers.list_keys.no_board_members_or_trustees') %>
    </dd>

    <dd class="govuk-summary-list__actions">
      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.board_members_or_trustees')}</span>".html_safe,
                :organisation_board_members_or_trustees,
                organisation_id: @organisation.id,
                class: "govuk-link govuk-link--no-visited-state"
      %>
    </dd>

  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.number_of_employees') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.number_of_employees.present? ?
              @organisation.number_of_employees : t('organisation.check_your_answers.list_keys.no_employees') %>
    </dd>

    <dd class="govuk-summary-list__actions">
       <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.number_of_employees')}</span>".html_safe,
                :organisation_number_of_employees,
                organisation_id: @organisation.id,
                class: "govuk-link govuk-link--no-visited-state"
      %> 
    </dd>

  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.number_of_volunteers') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.number_of_volunteers.present? ?
              @organisation.number_of_volunteers : t('organisation.check_your_answers.list_keys.no_volunteers') %>
    </dd>

    <dd class="govuk-summary-list__actions">
      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.number_of_volunteers')}</span>".html_safe,
                :organisation_number_of_volunteers,
                organisation_id: @organisation.id,
                class: "govuk-link govuk-link--no-visited-state"
      %>
    </dd>

  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.volunteer_work_description') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <%= @organisation.volunteer_work_description.present? ?
              @organisation.volunteer_work_description : t('generic.not_answered') %>
    </dd>

    <dd class="govuk-summary-list__actions">
      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.volunteer_work_description')}</span>".html_safe,
                :organisation_volunteer_work_description,
                organisation_id: @organisation.id,
                class: "govuk-link govuk-link--no-visited-state"
      %>
    </dd>

  </div>

  <div class="govuk-summary-list__row">

    <dt class="govuk-summary-list__key">
      <%= t('organisation.check_your_answers.list_keys.governing_document') %>
    </dt>

    <dd class="govuk-summary-list__value">
      <% if @organisation.governing_document_file.present? %>

      <tbody class="govuk-table__body">
        <% @organisation.governing_document_file.each do |attachment| %>
            <td class="govuk-table__cell">
                <%= link_to attachment.blob.filename.to_s, rails_blob_path(attachment, disposition: 'attachment'), class: 'govuk-link' %>
            </td>
        <% end %>

        <% else %>
          <%= t('generic.none')%> 
        <% end %>

    </dd> 
          
    <dd class="govuk-summary-list__actions">
      <%=
        link_to "#{t('generic.change')}<span class='govuk-visually-hidden'>
        #{t('organisation.check_your_answers.change_links.governing_document')}</span>".html_safe,
                :organisation_governing_documents,
                organisation_id: @organisation.id,
                class: "govuk-link govuk-link--no-visited-state"
      %>
    </dd>

  </div>

</dl>


<div class="govuk-warning-text">
  <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
  <strong class="govuk-warning-text__text">
    <span class="govuk-warning-text__assistive">
      <%= t('organisation.check_your_answers.warning.heading') %>
    </span>
    <%= t('organisation.check_your_answers.warning.text') %>
  </strong>
</div>

<%=
  form_with model: @organisation,
            url: :organisation_check_your_answers,
            method: :put,
            local: true do |f|
%>

 <%= render(ButtonComponent.new(element: 'input')) %>

<% end %>
