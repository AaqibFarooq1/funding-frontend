<%=
  render partial: "partials/page_title",
         locals: {
             model_object: nil,
             page_title: 'Permission to Start -  Agreed Costs'
         }
%><%=
  render(
    partial: 'partials/summary_errors',
    locals: {
      form_object: @salesforce_experience_application,
      first_form_element: :costs_are_correct_true
    }
  ) if @salesforce_experience_application.errors.any?
%>

<div class="govuk-form-group <%= "govuk-form-group--error" if
  @salesforce_experience_application.errors.any? %>">

  <span class="govuk-caption-xl govuk-!-padding-bottom-2">Agreed Costs</span>
  <h1 class="govuk-heading-l govuk-!-padding-bottom-2">
    Are the cash contributions still correct?
  </h1>

  <section class="nlhf-summary govuk-!-margin-bottom-9" id="project-costs">

    <header class="nlhf-summary__header">

      <h2 class="govuk-heading-m">
          Cash contributions summary
      </h2>

    </header>

      <div class="nlhf-summary__body">

        <table class="govuk-table">

          <thead class="govuk-table__head">

            <tr class="govuk-table__row">

                <th scope="col" class="govuk-table__header">
                    Description of funding
                </th>

                <th scope="col" class="govuk-table__header">
                    Amount expected (Â£)
                </th>

            </tr>

          </thead>

          <tbody class="govuk-table__body">

            <% [{:description_of_funding => 'desc 1', :amount_expected => 100 }, {:description_of_funding => 'desc 2', :amount_expected => 200}].each do |cc| %>

              <tr class="govuk-table__row">

                  <td scope="govuk-table__cell" class="govuk-table__cell">
                    <%= cc[:description_of_funding] %>
                  </td>

                  <td class="govuk-table__cell">
                      <%= number_to_currency(cc[:amount_expected], unit: "",  precision: 2) %>
                  </td>

              </tr>

            <% end %>
            
          </tbody>

        </table>

      </div>

  </section>

  <%= form_with(
      url: :sfx_pts_payment_agreed_costs,
      method: :post,
      local: true
    ) do |f| 
  %>

    <div class="govuk-form-group">

        <div class="govuk-radios govuk-radios--conditional govuk-!-padding-bottom-8" data-module="govuk-radios">

          <div class="govuk-radios__item">

            <%=
              f.radio_button :costs_are_correct,
              true,
              class: "govuk-radios__input"
            %>

            <%= 
              f.label :costs_are_correct_true, 
              "Yes, the cash contributions are correct",
              class: "govuk-label govuk-radios__label govuk-label--s" 
            %>

          </div>

          <div class="govuk-radios__item">

            <%=
              f.radio_button :costs_are_correct,
              false,
              class: "govuk-radios__input",
              "data-aria-controls" => "conditional-costs_are_correct"
            %>

            <%= 
              f.label :costs_are_correct_false, 
              "No, the cash contributions are not correct",
              class: "govuk-label govuk-radios__label govuk-label--s" 
            %>

          </div>

          <div class="govuk-radios__conditional govuk-radios__conditional--hidden"
              id="conditional-costs_are_correct">

            <p class="govuk-body">
                Changes to cash contributions need to be agreed with your Investment Manager. Contact your Investment Manager for further details.
            </p>
            
          </div>
        </div>

        <%= render(
          ButtonComponent.new(
          element: 'button',
          is_start_button: false,
          text: "Save and continue"
          )
        )%>

    </div>
  </div>
<% end %>
