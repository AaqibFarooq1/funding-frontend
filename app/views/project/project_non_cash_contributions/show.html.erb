

<span class="govuk-caption-xl">Support for your project</span>
<h1 class="govuk-heading-xl">Non-cash contributions</h1>

<section class="nlhf-summary nlhf-summary--non-cash govuk-!-margin-bottom-9">

  <header class="nlhf-summary__header">
    <h2 class="govuk-heading-m">Your non-cash contributions</h2>
  </header>

  <div class="nlhf-summary__body">

    <% if @project.non_cash_contributions.empty? %>

      <h3 class="govuk-heading-m govuk-!-margin-bottom-0">You have not added any non-cash contributions</h3>

    <% else %>

      <% @project.non_cash_contributions.filter { |ncc| ncc.description.present? }.each do |ncc| %>

        <ul class="govuk-list govuk-list--bullet">

          <%= content_tag(:li, ncc.description) %>

          <ul class="govuk-list govuk-list--bullet">
            <%= content_tag(:li, "Amount:  #{number_to_currency(ncc.amount, strip_insignificant_zeros: true)}") if ncc.amount.present? %>
          </ul>

        </ul>

      <% end %>

    <% end %>

  </div>

</section>

<%= form_with model: @project, url: three_to_ten_k_project_non_cash_contributions_put_path, method: :put do |f| %>

  <%= f.fields_for :non_cash_contributions, @non_cash_contributions do |ncc| %>

    <div class="nlhf-add-item">

      <header class="nlhf-add-item__header">
        <h2 class="govuk-heading-l">Add a non-cash contribution</h2>
      </header>

      <div class="nlhf-add-item__body">

        <details class="govuk-details" data-module="govuk-details">

          <summary class="govuk-details__summary">

          <span class="govuk-details__summary-text">
            What are non-cash contributions?
          </span>

          </summary>

          <div class="govuk-details__text">

            <p class="govuk-body">
              Non-cash contributions are things you need for your project that you do not have to pay for.
            </p>

            <p class="govuk-body">
              For example - the use of a room in a local business, or materials being donated by a local firm.
            </p>

          </div>

        </details>

        <div class="nlhf-add-item__row">

          <div class="govuk-character-count" data-module="govuk-character-count" data-maxwords="50">

            <div class="govuk-form-group">

              <%= ncc.label :description, 'Description', class: 'govuk-label' %>
              <%= ncc.text_area :description,
                                rows: 5,
                                class: 'govuk-textarea govuk-js-character-count',
                                "aria-describedby" => "something"
              %>

            </div>

            <span class="govuk-hint govuk-character-count__message"
                  id="project_non_cash_contributions_attributes_0_description-info"></span>

          </div>

        </div>

        <div class="nlhf-add-item__row">

          <div class="govuk-form-group">

            <label class="govuk-label" for="nc-cont-amount">
              Estimated value
            </label>

            <span id="nc-cont-amount-hint" class="govuk-hint govuk-!-font-size-17">
            An estimate of how much this would have cost if your project had to pay for it
          </span>

            <div class="nlhf-currency-denote">

              <div class="nlhf-currency-denote__symbol">
                &pound;
              </div>

              <div class="nlhf-currency-denote__capture">

                <%#= cc.label :amount, class: 'govuk-label' %>
                <%= ncc.number_field :amount,
                                     min: 1,
                                     class: 'govuk-input',
                                     "aria-describedby" => "something",
                                     "autocomplete" => "off"
                %>

              </div>

            </div>

          </div>

        </div>

        <div class="nlhf-add-item__row">

          <%= ncc.submit 'Add non-cash contribution',
                         role: "button",
                         'data-prevent-double-click' => 'true',
                         class: 'govuk-button govuk-button--secondary'
          %>

        </div>

      </div>

    </div>

  <% end %>

<% end %>

<hr class="govuk-section-break--l govuk-section-break--visible">

<p class="govuk-body">If you have finished adding all your non-cash contributions</p>

<button data-prevent-double-click="true" class="govuk-button" data-module="govuk-button">
  Save and continue
</button>