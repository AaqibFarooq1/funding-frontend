<%=
  render partial: "partials/page_title",
         locals: {
             model_object: nil,
             page_title: I18n.t("dashboard.title")
         }
%>

<h1 class="govuk-heading-xl">
  <%= I18n.t("dashboard.heading") %>
</h1>

<% unless @projects.present? %>

  <div class="nlhf-panel nlhf-alert nlhf-alert--slim govuk-!-margin-bottom-8">

    <h2 class="govuk-heading-m">
      <%= I18n.t("dashboard.no_projects_sub_heading") %>
    </h2>

    <p class="govuk-body">
      <%= I18n.t("dashboard.no_projects_text") %>
    </p>

  </div>

<% else %>

  <p class="govuk-body">
    <%= I18n.t("dashboard.associated_projects_text") %>
  </p>

  <ul class="govuk-list govuk-list--number nlhf-list nlhf-list--links
   govuk-!-margin-bottom-8">

    <% @projects.each do| project | %>

      <li class="nlhf-list__item">

        <%= link_to_unless(project.submitted_on.present?, project.project_title.present? ? project.project_title : "Untitled project", three_to_ten_k_project_title_get_url(project_id: project.id), class: 'govuk-link govuk-link--no-visited-state') do |name|
          "#{name} - #{I18n.t("dashboard.submitted")}#{' - ' + I18n.t("dashboard.reference") + ': '  + project.project_reference_number if project.project_reference_number.present?}"
        end
        %>

      </li>

    <% end %>
  </ul>

  <p class="govuk-body">
    <%= I18n.t("dashboard.you_can_also") %>
  </p>

<% end %>

<%=
  render(
      ButtonComponent.new(
          element: "a",
          "href": start_a_project_url,
          is_start_button: true,
          text: I18n.t("dashboard.start_a_new_project_button")
      )
  )
%>

<%= content_for :tracking_override do %>/project-dashboard<% end %>
